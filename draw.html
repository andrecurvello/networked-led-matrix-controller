<html>
	<head>
		<style type="text/css">
			#drawTable td {
				background-color: black;
				padding: 0 0 0 0;
				margin: 0 0 0 0;
				width: 30px;
				height: 30px;
			}
			#drawTable {
				border-spacing: 0;
			}
		</style>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
		</script>
		<script language="JavaScript">
			var pressed = false;
			function generateTable() {
				for(var y = 0; y<16; y++) {
					var row = "<tr>"
					for(var x = 0; x<16; x++) {
						row = row + "<td id='cell-"+x+"-"+y+"' onMouseDown='changeColor("+x+","+y+");'></td>";
					}
					row = row + "</tr>"
					$("#drawTable").append(row);
				}
				$("td").mouseenter(hovering);

				$("#drawTable").mousedown(function() {
					pressed = true;
					//$("#drawTable").bind('mouseover', hovering);
					return false;
				});
				$("#drawTable").mouseup(function() {
					pressed = false
					//$("#drawTable").unbind('mouseover');
					return false;
				});
			}

			function color(red, green) {
				return red | green << 8;
			}

			function changeColor(x, y) {
				$("#cell-" + x + "-" + y).css('background-color', 'red');
				$.ajax( {
						url: 'http://10.0.0.238/Pixel', 
						headers: {
							'X': x,
							'Y': y,
							'Color': color(0, 32)
						}
					});
			}

			function hovering(ev) {
				if( pressed ) {
					ev.target.onmousedown();
				}
			}
		</script>
	</head>
	<body onLoad="generateTable();">
		<table id="drawTable">
		</table>
	</body>
</html>
